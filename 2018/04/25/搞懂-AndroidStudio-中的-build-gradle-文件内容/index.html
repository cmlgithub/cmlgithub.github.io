<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Android Studio," />










<meta name="description" content="此文章未完待续对 Android Studio 中的 build.gradle 一直是中模棱两可的状态,只是简单的知道怎么用,怎么改,有时候报错了也只是 search 一下把网上的代码弄过来,问题解决了就 ok 了. 但是心里一直有个这个坎儿,终于抽时间来彻底弄懂 build.gradle 文件中的代码是什么意思了. 开始吧 1.build.gradle文件的分类">
<meta name="keywords" content="Android Studio">
<meta property="og:type" content="article">
<meta property="og:title" content="搞懂 AndroidStudio 中的 build.gradle 文件内容">
<meta property="og:url" content="https://cmlgithub.github.io##定义网站访问的域名/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/index.html">
<meta property="og:site_name" content="陈明亮的 Blog">
<meta property="og:description" content="此文章未完待续对 Android Studio 中的 build.gradle 一直是中模棱两可的状态,只是简单的知道怎么用,怎么改,有时候报错了也只是 search 一下把网上的代码弄过来,问题解决了就 ok 了. 但是心里一直有个这个坎儿,终于抽时间来彻底弄懂 build.gradle 文件中的代码是什么意思了. 开始吧 1.build.gradle文件的分类">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://cmlgithub.github.io/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle1.png">
<meta property="og:image" content="https://cmlgithub.github.io/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle2.png">
<meta property="og:image" content="https://cmlgithub.github.io/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle3.png">
<meta property="og:image" content="https://cmlgithub.github.io/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle5.png">
<meta property="og:image" content="https://cmlgithub.github.io/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle6.png">
<meta property="og:image" content="https://cmlgithub.github.io/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle4.png">
<meta property="og:updated_time" content="2018-05-17T02:52:48.190Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="搞懂 AndroidStudio 中的 build.gradle 文件内容">
<meta name="twitter:description" content="此文章未完待续对 Android Studio 中的 build.gradle 一直是中模棱两可的状态,只是简单的知道怎么用,怎么改,有时候报错了也只是 search 一下把网上的代码弄过来,问题解决了就 ok 了. 但是心里一直有个这个坎儿,终于抽时间来彻底弄懂 build.gradle 文件中的代码是什么意思了. 开始吧 1.build.gradle文件的分类">
<meta name="twitter:image" content="https://cmlgithub.github.io/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://cmlgithub.github.io##定义网站访问的域名/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/"/>





  <title>搞懂 AndroidStudio 中的 build.gradle 文件内容 | 陈明亮的 Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8fd4ada0332dc388c37d7285dc41b0a1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">陈明亮的 Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://cmlgithub.github.io##定义网站访问的域名/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cml">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/13469575?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈明亮的 Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">搞懂 AndroidStudio 中的 build.gradle 文件内容</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-25T18:06:03+08:00">
                2018-04-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="此文章未完待续"><a href="#此文章未完待续" class="headerlink" title="此文章未完待续"></a>此文章未完待续</h1><p>对 Android Studio 中的 build.gradle 一直是中模棱两可的状态,只是简单的知道怎么用,怎么改,有时候报错了也只是 search 一下把网上的代码弄过来,问题解决了就 ok 了.</p>
<p>但是心里一直有个这个坎儿,终于抽时间来彻底弄懂 build.gradle 文件中的代码是什么意思了.</p>
<p><strong>开始吧</strong></p>
<h2 id="1-build-gradle文件的分类"><a href="#1-build-gradle文件的分类" class="headerlink" title="1.build.gradle文件的分类"></a>1.build.gradle文件的分类</h2><a id="more"></a>
<p>我们在建立一个新项目的时候,会发现整个的 project 中会存在两个 build.gradle 文件.</p>
<p>上一张图看看吧<br><img src="/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle1.png" alt=""></p>
<p>如上图所示<br><br>其中的<strong>1号文件</strong>是属于整个项目的 build.gradle 文件(这里叫它project层 gradle)<br><br><strong>2号文件</strong>是属于 app 这个 module 的 build.gradle 文件(这里叫它 module 层 gradle)<br><br>当然如果你引入了<strong>多个 module</strong> 的话那么每个 module里面都会存在一个 build.gradle 文件的.</p>
<h2 id="2-project-层的-build-gradle-文件"><a href="#2-project-层的-build-gradle-文件" class="headerlink" title="2.project 层的 build.gradle 文件"></a>2.project 层的 build.gradle 文件</h2><p>同样上一张结构图吧,然后再分析</p>
<p><img src="/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle2.png" alt=""></p>
<p>如图所示可以看到这个文件总共分为3个部分,我们一个一个的看吧</p>
<p><strong>buildscript{}</strong> :<br></p>
<p>一起看看 google 的解释</p>
<p><br>    The buildscript {} block is where you configure the repositories and dependencies for Gradle itself–meaning, you should not include dependencies for your modules here. For example, this block includes the Android plugin for Gradle as a dependency because it provides the additional instructions Gradle needs to build Android app modules.<br></p>

<p>意思就是:这个代码块是负责配置<strong>Gradle 自身</strong>的依赖和配置依赖所需要查找的库的代码块.</p>
<p><strong>因此不能在此配置任何关于 module 的依赖项</strong></p>
<p> <code>dependencies</code> 里面会配置我们用到的插件,如默认存在的 gradle 可以用来自动化构建项目.还可以手动配置如 apt…</p>
<p> <code>repositories</code> 里面指定了dependencies 中插件所存在的位置,如jcenter(),Maven()…</p>
<p> <strong>allprojects{}</strong></p>
<p> 代码块这个里面比较简单,就不上图了,结构上跟 buildscript中的 repositories 是一样的.</p>
<p> 同理,allprojects 中的 repositories 也是为某某提供的库的位置的.</p>
<p> 那么这个某某是谁呢,看 allprojects 我们就知道了,没错就是我们的 project 中所有的 moudle 中的依赖的开源项目.</p>
<p> 其实说了这么多,总结起来就一张图就行<br> <img src="/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle3.png" alt=""></p>
<p> <strong>task clean(type: Delete){}</strong></p>
<p> 解释这个之前,我们先看一个例子就明白了.</p>
<p> 看图说话<br> <img src="/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle5.png" alt=""></p>
<p> 再看看<code>version.gradle</code> 文件<br> <img src="/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle6.png" alt=""></p>
<p> 先看目录,我新建了一个 version.gradle,并且通过<code>apply from: &#39;version.gradle&#39;</code>引入到了 project 层的 build.gradle </p>
<p> 这个有什么用呢,我们可以用这个单独的 gradle 文件来统一管理我们的第三方依赖的版本号.</p>
<p> 接下来我们再看 这个文件的最底部 </p>
<pre><code>task printStringCml{
    println &quot;cmlVersionCode${versionCode}&quot;
}
</code></pre><p> 这段代码.其实就是一个 task 我们可以在命令行执行它</p>
<p> 接下来看看 Terminal 中我执行了这段代码</p>
<p> 可以看到在下面打印的结果.</p>
<p> 好了,看完了上面的例子我们再看<code>task clean()</code> 就知道了,这只是一个 task 任务而已,功能就是将 android 生成的 build 文件删除而已,不用深究.</p>
<h2 id="3-module层的-build-gradle"><a href="#3-module层的-build-gradle" class="headerlink" title="3.module层的 build.gradle"></a>3.module层的 build.gradle</h2><p> 还是先上一张结构图<br> <img src="/2018/04/25/搞懂-AndroidStudio-中的-build-gradle-文件内容/gradle4.png" alt="">     </p>
<p> <strong>apply</strong><br><br> 如图的第一行<br> 从字面上理解就是申请一个插件<br><br> <code>apply plugin: &#39;com.android.application&#39;</code>的意思就是申请一个 android 插件用来处理 android 项目<br> 同理还可以根据实际情况增加其它的<br></p>
<p> eg:<br><br>     1.需要用到 GreenDao 的时候就需要增加<code>apply plugin: &#39;org.greenrobot.greendao&#39;</code><br><br>     2.如果作为一个库文件的话,那么第一行就是<code>apply plugin: &#39;com.android.library&#39;</code>表示要用到一些关于库方面的插件了.</p>
<p> <strong>android{}</strong><br><br> 初始的 anroid{} 代码块是两个部分<br><br> 第一部分就看图中的注释即可,也是比较简单易懂的</p>
<p> <strong>dependencies{}</strong><br> 关于这个代码块其实就是本 module所有的依赖存放的位置,关键是要搞懂几个关键字即可.</p>
<table>
<thead>
<tr>
<th style="text-align:center">new</th>
<th style="text-align:center">old</th>
<th style="text-align:center">explain</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>implementation</strong></td>
<td style="text-align:center"><strong>compile</strong></td>
<td style="text-align:center">implementation指令不会传递,也就是当前引用的第三方库仅限于本 moudle 使用,其他的 moudle 需要重新添加依赖才能用</td>
</tr>
<tr>
<td style="text-align:center"><strong>api</strong></td>
<td style="text-align:center"><strong>compile</strong></td>
<td style="text-align:center">基本没什么区别只是换了个名字而已</td>
</tr>
<tr>
<td style="text-align:center"><strong>compileOnly</strong></td>
<td style="text-align:center"><strong>provided</strong></td>
<td style="text-align:center">aaa </td>
</tr>
<tr>
<td style="text-align:center"><strong>runtimeOnly</strong></td>
<td style="text-align:center"><strong>apk</strong></td>
<td style="text-align:center">aaa </td>
</tr>
</tbody>
</table>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android-Studio/" rel="tag"># Android Studio</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/04/20/正则表达式/" rel="next" title="正则表达式">
                <i class="fa fa-chevron-left"></i> 正则表达式
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/05/09/JAVA-虚拟机-JVM/" rel="prev" title="JAVA 虚拟机 JVM">
                JAVA 虚拟机 JVM <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  




        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars1.githubusercontent.com/u/13469575?s=460&v=4"
                alt="cml" />
            
              <p class="site-author-name" itemprop="name">cml</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#此文章未完待续"><span class="nav-number">1.</span> <span class="nav-text">此文章未完待续</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-build-gradle文件的分类"><span class="nav-number">1.1.</span> <span class="nav-text">1.build.gradle文件的分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-project-层的-build-gradle-文件"><span class="nav-number">1.2.</span> <span class="nav-text">2.project 层的 build.gradle 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-module层的-build-gradle"><span class="nav-number">1.3.</span> <span class="nav-text">3.module层的 build.gradle</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cml</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
